<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Validate the local library — lib_validate • pacs</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Validate the local library — lib_validate"><meta property="og:description" content="Checking if installed packages have correct versions taking into account all DESCRIPTION files requirements.
Moreover identifying which packages are newest releases.
Optionally we could add life duration and CRAN check page status for each package."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pacs</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.4.6.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/GettingStarted.html">Walk-through `pacs`</a>
    </li>
    <li>
      <a href="../articles/tinyverse.html">tinyverse</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/Polkas/pacs/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Validate the local library</h1>
    <small class="dont-index">Source: <a href="https://github.com/Polkas/pacs/blob/HEAD/R/valid.R" class="external-link"><code>R/valid.R</code></a></small>
    <div class="hidden name"><code>lib_validate.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Checking if installed packages have correct versions taking into account all DESCRIPTION files requirements.
Moreover identifying which packages are newest releases.
Optionally we could add life duration and CRAN check page status for each package.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">lib_validate</span><span class="op">(</span>
  lib.loc <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/libPaths.html" class="external-link">.libPaths</a></span><span class="op">(</span><span class="op">)</span>,
  fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Depends"</span>, <span class="st">"Imports"</span>, <span class="st">"LinkingTo"</span><span class="op">)</span>,
  lifeduration <span class="op">=</span> <span class="cn">FALSE</span>,
  checkred <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>scope <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="fl">0</span><span class="op">)</span>, flavors <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span>,
  built <span class="op">=</span> <span class="cn">FALSE</span>,
  repos <span class="op">=</span> <span class="fu"><a href="biocran_repos.html">biocran_repos</a></span><span class="op">(</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>lib.loc</dt>
<dd><p><code>character</code> vector of search paths with local packages. Default: <code><a href="https://rdrr.io/r/base/libPaths.html" class="external-link">.libPaths()</a></code></p></dd>


<dt>fields</dt>
<dd><p><code>character</code> vector listing the types of dependencies, a subset of <code>c("Depends", "Imports", "LinkingTo", "Suggests", "Enhances")</code>.
Character string "all" is shorthand for that vector, character string "most" for the same vector without "Enhances", character string "strong" (default) for the first three elements of that vector.
Default: <code>c("Depends", "Imports", "LinkingTo")</code></p></dd>


<dt>lifeduration</dt>
<dd><p><code>logical</code> if to assess life duration for each package in the library.
For installed newest releases of packages, a local evaluation is used.
<code>MEATCRAN CRANDB</code> is used for libraries with less than 500 packages.
Otherwise the direct web page download from CRAN is used.
Default: `FALSE``</p></dd>


<dt>checkred</dt>
<dd><p><code>list</code> with two named fields, <code>scope</code> and <code>flavor</code>. <code>scope</code> of R CRAN check pages statuses to consider, any of <code>c("ERROR", "FAIL", "WARN", "NOTE")</code>.
<code>flavor</code> is a vector of CRAN machines to consider, which might be retrieved with <code>pacs::cran_flavors()$Flavor</code>.
By default an empty scope field deactivated assessment for <code>checkred</code> column, and NULL flavor will results in checking all machines.
Default <code>list(scope = character(0), flavor = NULL)</code></p></dd>


<dt>built</dt>
<dd><p><code>logical</code> if to add an R version under which each package was installed.
Useful mainly for a local usage.
Packages installed with a previous version of R could not work correctly with the new version of R. Default: <code>FALSE</code></p></dd>


<dt>repos</dt>
<dd><p><code>character</code> vector of repositories URLs to use. By default checking CRAN and newest Bioconductor per R version. Default <code><a href="biocran_repos.html">pacs::biocran_repos()</a></code></p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p><code>data.frame</code> with 4/6/8/9/10 columns.</p><dl><dt>Package</dt>
<dd><p>character a package name.</p></dd>

<dt>Version.expected.min</dt>
<dd><p>character expected by DESCRIPTION files minimal version. "" means not specified so the newest version.</p></dd>

<dt>Version.have</dt>
<dd><p>character installed package version.</p></dd>

<dt>version_status</dt>
<dd><p>numeric -1/0/1 which comes from <code><a href="https://rdrr.io/r/utils/compareVersion.html" class="external-link">utils::compareVersion</a></code> function.
0 means that we have the same version as required by DESCRIPTION files. -1 means we have too low version installed, this is an error. 1 means we have higher version.</p></dd>

<dt>built</dt>
<dd><p>character package was built under this R version</p></dd>

<dt>built_status</dt>
<dd><p>integer if the package was built under the current R version, then 1 (good) and for older R versions 0 (possibly bad).
A package built under older R version or mix of packages built under different versions could bring possible failures.</p></dd>

<dt>newest</dt>
<dd><p>logical (Internet needed) if the installed version is the newest one. For Bioconductor if is the newest one per R version.</p></dd>

<dt>cran</dt>
<dd><p>logical (Internet needed) if the package is on CRAN, version is not taken into account here.</p></dd>

<dt>checkred</dt>
<dd><p>(Optional) (Internet needed) logical if the NEWEST package contains any specified statuses on CRAN check page. <code><a href="checked_packages.html">pacs::checked_packages</a></code> is used to quickly retrieve all statuses at once.</p></dd>

<dt>lifeduration</dt>
<dd><p>(Optional) (Internet needed) integer number of days a package was released.</p></dd>


</dl></div>
    <div id="note">
    <h2>Note</h2>
    <p>Version.expected.min column not count packages which are not a dependency for any package, so could not be find in DESCRIPTION files.
When turn on the <code>lifeduration</code> options, calculations might be time consuming for libraries bigger than 500 packages.
Results are cached for 30 minutes with <code>memoise</code> package.
<code>BioConductor</code> packages are tested only in available scope, <code>checkred</code> is not assessed for them.
The <code>crandb</code> R packages database is a part of <code>METACRAN</code> project, source:
Csárdi G, Salmon M (2022). <code>pkgsearch</code>: Search and Query CRAN R Packages. <code>https://github.com/r-hub/pkgsearch</code>, <code>https://r-hub.github.io/pkgsearch/</code>.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"><span class="fu">pacs</span><span class="fu">::</span><span class="fu">lib_validate</span><span class="op">(</span><span class="op">)</span></span>
<span class="r-in"><span class="fu">pacs</span><span class="fu">::</span><span class="fu">lib_validate</span><span class="op">(</span>checkred <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>scope <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ERROR"</span>, <span class="st">"FAIL"</span>, <span class="st">"WARN"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="fu">pacs</span><span class="fu">::</span><span class="fu">lib_validate</span><span class="op">(</span>checkred <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span class="r-in">  scope <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ERROR"</span>, <span class="st">"FAIL"</span><span class="op">)</span>,</span>
<span class="r-in">  flavors <span class="op">=</span> <span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="match_flavors.html">match_flavors</a></span><span class="op">(</span><span class="op">)</span></span>
<span class="r-in"><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="co"># activate lifeduration argument, could be time consuming for bigger libraries.</span></span>
<span class="r-in"><span class="fu">pacs</span><span class="fu">::</span><span class="fu">lib_validate</span><span class="op">(</span></span>
<span class="r-in">  lifeduration <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span class="r-in">  checkred <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>scope <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ERROR"</span>, <span class="st">"FAIL"</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"><span class="co"># only R CRAN repository</span></span>
<span class="r-in"><span class="fu">pacs</span><span class="fu">::</span><span class="fu">lib_validate</span><span class="op">(</span>repos <span class="op">=</span> <span class="st">"https://cran.rstudio.com/"</span><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Maciej Nasinski.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.5.9000.</p>
</div>

      </footer></div>

  


  

  </body></html>

