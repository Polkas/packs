<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Supplementary Tools for R Packages Developers • pacs</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Supplementary Tools for R Packages Developers">
<meta property="og:description" content="pacs">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pacs</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.4.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/GettingStarted.html">Supplementary Tools for R Packages Developers</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/Polkas/pacs/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="GettingStarted_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Supplementary Tools for R Packages Developers</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Polkas/pacs/blob/HEAD/vignettes/GettingStarted.Rmd" class="external-link"><code>vignettes/GettingStarted.Rmd</code></a></small>
      <div class="hidden name"><code>GettingStarted.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Polkas/pacs" class="external-link">pacs</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://withr.r-lib.org" class="external-link">withr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://remotes.r-lib.org" class="external-link">remotes</a></span><span class="op">)</span></code></pre></div>
<div class="section level2">
<h2 id="hints">Hints<a class="anchor" aria-label="anchor" href="#hints"></a>
</h2>
<p><strong>Hint1</strong>: <code>Version</code> variable is mostly a minimal required i.e. max(version1, version2 , …).</p>
<p><strong>Hint2</strong>: When working with many packages it is recommended to use global functions, which retrieves data for many packages at once. An example will be usage of <code><a href="../reference/checked_packages.html">pacs::checked_packages()</a></code> over <code><a href="../reference/pac_checkpage.html">pacs::pac_checkpage</a></code> (or <code><a href="../reference/pac_checkred.html">pacs::pac_checkred</a></code>). Another example will be usage of <code><a href="https://rdrr.io/r/utils/available.packages.html" class="external-link">utils::available.packages</a></code> over <code><a href="../reference/pac_last.html">pacs::pac_last</a></code>. Finally, most important one will be <code><a href="../reference/lib_validate.html">pacs::lib_validate</a></code> over <code><a href="../reference/pac_validate.html">pacs::pac_validate</a></code> and <code><a href="../reference/pac_checkred.html">pacs::pac_checkred</a></code> and others.</p>
<p><strong>Hint3</strong>: Almost all time consuming calculations are cached (for 1 hour) with <code><a href="https://memoise.r-lib.org/reference/memoise.html" class="external-link">memoise::memoise</a></code> package, and the second invoke of the same call is instantaneous.</p>
<p><strong>Hint4</strong>: Use <code><a href="https://rdrr.io/r/parallel/mclapply.html" class="external-link">parallel::mclapply</a></code> (Linux and Mac) or <code><a href="https://rdrr.io/r/parallel/clusterApply.html" class="external-link">parallel::parLapply</a></code> (Windows, Linux and Mac) to speed up loop calculations. Nevertheless, under <code><a href="https://rdrr.io/r/parallel/mclapply.html" class="external-link">parallel::mclapply</a></code> computation results are NOT cached with <code>memoise</code> package. Warning: Parallel computations might be unstable.</p>
<p><strong>Hint5</strong>: <code>withr</code> and <code>remotes</code> packages are a valuable addition.</p>
</div>
<div class="section level2">
<h2 id="validate-the-library">Validate the library<a class="anchor" aria-label="anchor" href="#validate-the-library"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/lib_validate.html">lib_validate</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>This procedure will be crucial for R developers as clearly showing the possible broken packages inside the local library.<br>
Thus we could assess which packages require versions to update.</p>
<p>Default validation of the library with the <code><a href="../reference/lib_validate.html">pacs::lib_validate</a></code> function.<br>
The <code>field</code> argument is equal to <code>c("Depends", "Imports", "LinkingTo")</code> by default as these are the dependencies installed when the <code>install.packages</code> function is used.</p>
<p>The full library validation requires activation of two additional arguments <code>lifeduration</code> and <code>checkred</code>. Additional arguments are on default turned off as are time consuming, for <code>lifeduration</code> assessment might take even a few minutes for bigger libraries.</p>
<p>Assessment of status on CRAN check pages takes only a few additional seconds even for all R CRAN packages. <code><a href="../reference/checked_packages.html">pacs::checked_packages()</a></code> is used to gather all package check statuses for all CRAN servers.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/lib_validate.html">lib_validate</a></span><span class="op">(</span>checkred <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>scope <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ERROR"</span>, <span class="st">"FAIL"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>When <code>lifeduration</code> is triggered then assessment might take even few minutes.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/lib_validate.html">lib_validate</a></span><span class="op">(</span>lifeduration <span class="op">=</span> <span class="cn">TRUE</span>, 
                   checkred <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>scope <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ERROR"</span>, <span class="st">"FAIL"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Not only <code>scope</code> field inside <code>checkred</code> list could be updated, to remind any of <code>c("ERROR", "FAIL", "WARN", "NOTE")</code>. We could specify <code>flavors</code> field inside the <code>checkred</code> list argument and narrow the tested machines. The full list of CRAN servers (flavors) might be get with <code>pacs::cran_flavors()$Flavor</code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/lib_validate.html">lib_validate</a></span><span class="op">(</span>checkred <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>scope <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ERROR"</span>, <span class="st">"FAIL"</span><span class="op">)</span>, 
                   flavors <span class="op">=</span> <span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/cran_flavors.html">cran_flavors</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">Flavor</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="section level3">
<h3 id="investigate-by-filtering">Investigate by filtering<a class="anchor" aria-label="anchor" href="#investigate-by-filtering"></a>
</h3>
<p>Packages are not installed (and should be) or have too low version:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">lib</span> <span class="op">&lt;-</span> <span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/lib_validate.html">lib_validate</a></span><span class="op">(</span>checkred <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>scope <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ERROR"</span>, <span class="st">"FAIL"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="co"># not installed (and should be) or too low version</span>
<span class="va">lib</span><span class="op">[</span><span class="op">(</span><span class="va">lib</span><span class="op">$</span><span class="va">version_status</span> <span class="op">==</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span>, <span class="op">]</span>
<span class="co"># not installed (and should be)</span>
<span class="va">lib</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">lib</span><span class="op">$</span><span class="va">Version.have</span><span class="op">)</span>, <span class="op">]</span>
<span class="co"># too low version</span>
<span class="va">lib</span><span class="op">[</span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">lib</span><span class="op">$</span><span class="va">Version.have</span><span class="op">)</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">lib</span><span class="op">$</span><span class="va">version_status</span> <span class="op">==</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span>, <span class="op">]</span></code></pre></div>
<p>Packages which have at least one CRAN server which ERROR or FAIL:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">red</span> <span class="op">&lt;-</span> <span class="va">lib</span><span class="op">[</span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">lib</span><span class="op">$</span><span class="va">checkred</span><span class="op">)</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">lib</span><span class="op">$</span><span class="va">checkred</span> <span class="op">==</span> <span class="cn">TRUE</span><span class="op">)</span>, <span class="op">]</span>
<span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">red</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">red</span><span class="op">)</span></code></pre></div>
<p>Packages which are not a dependency (default Depends/Imports/LinkingTo) of any other package:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">lib</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">lib</span><span class="op">$</span><span class="va">Version.expected.min</span><span class="op">)</span>, <span class="op">]</span></code></pre></div>
<p>Non-CRAN packages:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">lib</span><span class="op">[</span><span class="va">lib</span><span class="op">$</span><span class="va">cran</span> <span class="op">==</span> <span class="cn">FALSE</span>, <span class="op">]</span></code></pre></div>
<p>Not newest packages:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">lib</span><span class="op">[</span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">lib</span><span class="op">$</span><span class="va">newest</span><span class="op">)</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">lib</span><span class="op">$</span><span class="va">newest</span> <span class="op">==</span> <span class="cn">FALSE</span><span class="op">)</span>, <span class="op">]</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="core-idea-behinde-lib_validate">Core idea behinde lib_validate<a class="anchor" aria-label="anchor" href="#core-idea-behinde-lib_validate"></a>
</h3>
<p>The core idea behind the function is coming from proper processing of the <code>installed.packages</code> function result.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># aggregate function is needed as we could have different versions</span>
<span class="co"># installed under different `.libPaths()`.</span>
<span class="va">installed_packages_unique</span> <span class="op">&lt;-</span> <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/aggregate.html" class="external-link">aggregate</a></span><span class="op">(</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/installed.packages.html" class="external-link">installed.packages</a></span><span class="op">(</span><span class="op">)</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Version"</span>, <span class="st">"Depends"</span>, <span class="st">"Imports"</span>, <span class="st">"LinkingTo"</span><span class="op">)</span><span class="op">]</span>, 
  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Package <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/utils/installed.packages.html" class="external-link">installed.packages</a></span><span class="op">(</span><span class="op">)</span><span class="op">[</span>, <span class="st">"Package"</span><span class="op">]</span><span class="op">)</span>, 
  <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>
<span class="op">)</span>
<span class="co"># installed_descriptions function transforms direct dependencies DESCRIPTION file fields</span>
<span class="co"># installed_packages_unique[, c("Depends", "Imports", "LinkingTo")] </span>
<span class="co"># to the two column data.frame with Package name </span>
<span class="co"># and minimum required Version i.e. max(version1, version2 , ...).</span>
<span class="va">installed_descriptions</span> <span class="op">&lt;-</span> <span class="fu">pacs</span><span class="fu">:::</span><span class="fu">installed_descriptions</span><span class="op">(</span>
  lib.loc <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/libPaths.html" class="external-link">.libPaths</a></span><span class="op">(</span><span class="op">)</span>, 
  fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Depends"</span>, <span class="st">"Imports"</span>, <span class="st">"LinkingTo"</span><span class="op">)</span>
<span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span>
  <span class="va">installed_descriptions</span>,
  <span class="va">installed_packages_unique</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Package"</span>, <span class="st">"Version"</span><span class="op">)</span><span class="op">]</span>,
  by <span class="op">=</span> <span class="st">"Package"</span>,
  all <span class="op">=</span> <span class="cn">TRUE</span>,
  suffix <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">".expected.min"</span>, <span class="st">".have"</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="renv">renv<a class="anchor" aria-label="anchor" href="#renv"></a>
</h3>
<p>When a project is based on <code>renv</code> and all needed dependencies are installed in the <code>renv</code> directory then we mostly want to validate only the isolated <code>renv</code> library. In the new <code>renv</code> versions the <code><a href="https://rdrr.io/r/base/libPaths.html" class="external-link">.libPaths()</a></code> contains the main library path too (<code>renv</code> library and the main library). Please remember to limit the library path when using <code><a href="../reference/lib_validate.html">pacs::lib_validate</a></code>, to limit the validation to only <code>renv</code> library.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># renv::init()</span>
<span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/lib_validate.html">lib_validate</a></span><span class="op">(</span>lib.loc <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/libPaths.html" class="external-link">.libPaths</a></span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></code></pre></div>
<p>Warning, at least <code>rsconnect</code> (and its <code>packrat</code> connected dependencies) related packages could still not be in the <code>renv</code> library.</p>
</div>
<div class="section level3">
<h3 id="r-cran-packages-check-page-statuses">R CRAN packages check page statuses<a class="anchor" aria-label="anchor" href="#r-cran-packages-check-page-statuses"></a>
</h3>
<p><code>checked_packages</code> was built to extend the <code>.packages</code> family functions, like <code><a href="https://rdrr.io/r/utils/installed.packages.html" class="external-link">utils::installed.packages()</a></code> and <code><a href="https://rdrr.io/r/utils/available.packages.html" class="external-link">utils::available.packages()</a></code>. <code><a href="../reference/checked_packages.html">pacs::checked_packages</a></code> retrieves all current packages checks from <a href="https://cran.r-project.org/web/checks/check_summary_by_package.html" class="external-link">CRAN webpage</a>.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/checked_packages.html">checked_packages</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>Use <code>pacs::pac_checkpage("dplyr")</code> to get the check page per package. However <code><a href="../reference/checked_packages.html">pacs::checked_packages()</a></code> will be more efficient for many packages. Remember that <code><a href="../reference/checked_packages.html">pacs::checked_packages()</a></code> result is cached after the first invoke.</p>
</div>
<div class="section level3">
<h3 id="package-health-and-life-duration">Package health and life duration<a class="anchor" aria-label="anchor" href="#package-health-and-life-duration"></a>
</h3>
<p>We could find out if a certain package version lived more than 14 days (or other x limit days). If not then we might assume something was wrong with it, as had to be quickly updated.</p>
<p>e.g. <code>dplyr</code> under the “0.8.0” version seems to be a broken release, we could find out that it was published only for 1 day.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/pac_lifeduration.html">pac_lifeduration</a></span><span class="op">(</span><span class="st">"dplyr"</span>, <span class="st">"0.8.0"</span><span class="op">)</span></code></pre></div>
<p>With a 14 day limit we get a proper health status. We are sure about this state as this is not the newest release. For newest packages we are checking if there are any red messages on CRAN check pages too, specified with a <code>scope</code> argument.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/pac_health.html">pac_health</a></span><span class="op">(</span><span class="st">"dplyr"</span>, version <span class="op">=</span> <span class="st">"0.8.0"</span>, limit <span class="op">=</span> <span class="fl">14</span><span class="op">)</span></code></pre></div>
<p>For the newest package we will check the CRAN check page too, the scope might be adjusted.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/pac_health.html">pac_health</a></span><span class="op">(</span><span class="st">"dplyr"</span>, limit <span class="op">=</span> <span class="fl">14</span>, scope <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ERROR"</span>, <span class="st">"FAIL"</span>, <span class="st">"WARN"</span><span class="op">)</span><span class="op">)</span>
<span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/pac_health.html">pac_health</a></span><span class="op">(</span><span class="st">"dplyr"</span>, limit <span class="op">=</span> <span class="fl">14</span>, scope <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ERROR"</span>, <span class="st">"FAIL"</span>, <span class="st">"WARN"</span><span class="op">)</span>, 
                 flavors <span class="op">=</span> <span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/cran_flavors.html">cran_flavors</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">Flavor</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="simulate-a-package-download-with-the-withr-package">Simulate a package download with the withr package<a class="anchor" aria-label="anchor" href="#simulate-a-package-download-with-the-withr-package"></a>
</h3>
<p><code>withr</code> package is recommended for the isolated download process.<br>
We could use a temporary library path (<code><a href="https://withr.r-lib.org/reference/with_temp_libpaths.html" class="external-link">withr::with_temp_libpaths</a></code>) to check if the process is as expected.</p>
<p>Checking what packages need to be installed/(optionally updated) parallel with a specific package, with <code>remotes</code> package.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/package_deps.html" class="external-link">package_deps</a></span><span class="op">(</span><span class="st">"keras"</span><span class="op">)</span></code></pre></div>
<p>Isolated download of a package and the validation.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># restart of R session could be needed</span>
<span class="fu">withr</span><span class="fu">::</span><span class="fu"><a href="https://withr.r-lib.org/reference/with_temp_libpaths.html" class="external-link">with_temp_libpaths</a></span><span class="op">(</span><span class="op">{</span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"keras"</span><span class="op">)</span>; <span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/lib_validate.html">lib_validate</a></span><span class="op">(</span><span class="op">)</span><span class="op">}</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># restart of R session could be needed</span>
<span class="fu">withr</span><span class="fu">::</span><span class="fu"><a href="https://withr.r-lib.org/reference/with_temp_libpaths.html" class="external-link">with_temp_libpaths</a></span><span class="op">(</span><span class="op">{</span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"keras"</span><span class="op">)</span>; <span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/pac_validate.html">pac_validate</a></span><span class="op">(</span><span class="st">"keras"</span><span class="op">)</span><span class="op">}</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="per-package-utils">Per package utils<a class="anchor" aria-label="anchor" href="#per-package-utils"></a>
</h2>
<div class="section level3">
<h3 id="time-machine">Time Machine<a class="anchor" aria-label="anchor" href="#time-machine"></a>
</h3>
<p>Using R CRAN website to get packages version/versions used at a specific Date or a Date interval.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/pac_timemachine.html">pac_timemachine</a></span><span class="op">(</span><span class="st">"dplyr"</span><span class="op">)</span>
<span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/pac_timemachine.html">pac_timemachine</a></span><span class="op">(</span><span class="st">"dplyr"</span>, version <span class="op">=</span> <span class="st">"0.8.0"</span><span class="op">)</span>
<span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/pac_timemachine.html">pac_timemachine</a></span><span class="op">(</span><span class="st">"dplyr"</span>, at <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2017-02-02"</span><span class="op">)</span><span class="op">)</span>
<span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/pac_timemachine.html">pac_timemachine</a></span><span class="op">(</span><span class="st">"dplyr"</span>, from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2017-02-02"</span><span class="op">)</span>, to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2018-04-02"</span><span class="op">)</span><span class="op">)</span>
<span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/pac_timemachine.html">pac_timemachine</a></span><span class="op">(</span><span class="st">"dplyr"</span>, at <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/pac_timemachine.html">pac_timemachine</a></span><span class="op">(</span><span class="st">"tidyr"</span>, from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2020-06-01"</span><span class="op">)</span>, to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="package-dependencies">Package dependencies<a class="anchor" aria-label="anchor" href="#package-dependencies"></a>
</h3>
<p>One of the main functionality is to get versions for all package dependencies. Versions might come from installed packages or DESCRIPTION files.</p>
<p><code>pac_deps</code> for an extremely fast retrieving of package dependencies, packages versions might come from installed ones or from DESCRIPTION files (required minimum). The default setup is to show dependencies recursively, <code>recursive = TRUE</code>.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Providing more than tools::package_dependencies and packrat:::recursivePackageVersion</span>
<span class="co"># pacs::pac_deps is providing the min required version for each package</span>
<span class="co"># Use it to answer what we should have</span>
<span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/pac_deps.html">pac_deps</a></span><span class="op">(</span><span class="st">"shiny"</span>, description_v <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">res</span>
<span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></code></pre></div>
<p>Packages dependencies with versions from DESCRIPTION files.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/pac_deps.html">pac_deps</a></span><span class="op">(</span><span class="st">"shiny"</span>, description_v <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>Remote (newest CRAN) package dependencies with versions.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/pac_deps.html">pac_deps</a></span><span class="op">(</span><span class="st">"shiny"</span>, local <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<p>Raw dependencies from DESCRIPTION file</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/pac_deps.html">pac_deps</a></span><span class="op">(</span><span class="st">"memoise"</span>, description_v <span class="op">=</span> <span class="cn">TRUE</span>, recursive <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<p>The <code>field</code> argument is used to change the scope of exploration. The <code>field</code> argument is equal to <code>c("Depends", "Imports", "LinkingTo")</code> by default as these are the dependencies installed when the <code>install.packages</code> function is used. When the <code>field</code> argument is extended the number of dependencies will grow. Remember that we are looking for dependencies recursively by default. At the moment of writing it the first invoke returns 3 dependencies whereas the second one 1405 and the last one 1427. It should be clear that when extending the scope (and recursively) with the <code>"Suggests"</code> field then the number of dependencies is exploding.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/pac_deps.html">pac_deps</a></span><span class="op">(</span><span class="st">"memoise"</span>, fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Depends"</span>, <span class="st">"Imports"</span>, <span class="st">"LinkingTo"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/pac_deps.html">pac_deps</a></span><span class="op">(</span><span class="st">"memoise"</span>, fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Depends"</span>, <span class="st">"Imports"</span>, <span class="st">"LinkingTo"</span>, <span class="st">"Suggests"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/pac_deps.html">pac_deps</a></span><span class="op">(</span><span class="st">"memoise"</span>, fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Depends"</span>, <span class="st">"Imports"</span>, <span class="st">"LinkingTo"</span>, <span class="st">"Suggests"</span>, <span class="st">"Enhances"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>For a certain version, might take some time.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/pac_deps_timemachine.html">pac_deps_timemachine</a></span><span class="op">(</span><span class="st">"dplyr"</span>, version <span class="op">=</span> <span class="st">"0.8.1"</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="package-description-file">Package DESCRIPTION file<a class="anchor" aria-label="anchor" href="#package-description-file"></a>
</h3>
<p>Reading raw <code>dcf</code> DESCRIPTION files scrapped from the github CRAN mirror or if not worked from the CRAN website.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/pac_description.html">pac_description</a></span><span class="op">(</span><span class="st">"dplyr"</span><span class="op">)</span>
<span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/pac_description.html">pac_description</a></span><span class="op">(</span><span class="st">"dplyr"</span>, version <span class="op">=</span> <span class="st">"0.8.0"</span><span class="op">)</span>
<span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/pac_description.html">pac_description</a></span><span class="op">(</span><span class="st">"dplyr"</span>, at <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2019-01-01"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="package-namespace-file">Package NAMESPACE file<a class="anchor" aria-label="anchor" href="#package-namespace-file"></a>
</h3>
<p>Reading raw NAMESPACE files scrapped from the github CRAN mirror or if it did not work from the CRAN website.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/pac_namespace.html">pac_namespace</a></span><span class="op">(</span><span class="st">"dplyr"</span><span class="op">)</span>
<span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/pac_namespace.html">pac_namespace</a></span><span class="op">(</span><span class="st">"dplyr"</span>, version <span class="op">=</span> <span class="st">"0.8.0"</span><span class="op">)</span>
<span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/pac_namespace.html">pac_namespace</a></span><span class="op">(</span><span class="st">"dplyr"</span>, at <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2019-01-01"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="comapre-different-package-versions">Comapre different package versions<a class="anchor" aria-label="anchor" href="#comapre-different-package-versions"></a>
</h2>
<div class="section level3">
<h3 id="comparing-description-files-between-different-package-versions">Comparing DESCRIPTION files between different package versions<a class="anchor" aria-label="anchor" href="#comparing-description-files-between-different-package-versions"></a>
</h3>
<p>Comparing DESCRIPTION file dependencies between local and the newest package. We will get duplicated columns if the local version is the newest one.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/pac_compare_versions.html">pac_compare_versions</a></span><span class="op">(</span><span class="st">"shiny"</span><span class="op">)</span></code></pre></div>
<p>Comparing DESCRIPTION file dependencies between package versions.</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/pac_compare_versions.html">pac_compare_versions</a></span><span class="op">(</span><span class="st">"shiny"</span>, <span class="st">"1.4.0"</span>, <span class="st">"1.5.0"</span><span class="op">)</span>

<span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/pac_compare_versions.html">pac_compare_versions</a></span><span class="op">(</span><span class="st">"shiny"</span>, <span class="st">"1.4.0"</span>, <span class="st">"1.6.0"</span><span class="op">)</span>
<span class="co"># to newest release</span>
<span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/pac_compare_versions.html">pac_compare_versions</a></span><span class="op">(</span><span class="st">"shiny"</span>, <span class="st">"1.4.0"</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="comparing-namespace-files-between-different-package-versions">Comparing NAMESPACE files between different package versions<a class="anchor" aria-label="anchor" href="#comparing-namespace-files-between-different-package-versions"></a>
</h3>
<p>Comparing NAMESPACE between local and the newest package.</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/pac_compare_namespace.html">pac_compare_namespace</a></span><span class="op">(</span><span class="st">"shiny"</span><span class="op">)</span></code></pre></div>
<p>Comparing NAMESPACE between package versions.</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/pac_compare_namespace.html">pac_compare_namespace</a></span><span class="op">(</span><span class="st">"shiny"</span>, <span class="st">"1.0.0"</span>, <span class="st">"1.5.0"</span><span class="op">)</span>
<span class="co"># e.g. only exports </span>
<span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/pac_compare_namespace.html">pac_compare_namespace</a></span><span class="op">(</span><span class="st">"shiny"</span>, <span class="st">"1.0.0"</span>, <span class="st">"1.5.0"</span><span class="op">)</span><span class="op">$</span><span class="va">exports</span>

<span class="co"># to newest release</span>
<span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/pac_compare_namespace.html">pac_compare_namespace</a></span><span class="op">(</span><span class="st">"shiny"</span>, <span class="st">"1.0.0"</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="package-weight-case-study-devtools">Package Weight Case Study: <code>devtools</code><a class="anchor" aria-label="anchor" href="#package-weight-case-study-devtools"></a>
</h2>
<p>Take into account that packages sizes are appropriate for your local system (<code><a href="https://rdrr.io/r/base/Sys.info.html" class="external-link">Sys.info()</a></code>). Installation with <code>install.packages</code> and some <code>devtools</code> functions might result in different packages sizes.</p>
<p>If you do not want to install anything in your current library (<code><a href="https://rdrr.io/r/base/libPaths.html" class="external-link">.libPaths()</a></code>) and still inspect a package size, then a usage of the <code>withr</code> package is recommended. <code><a href="https://withr.r-lib.org/reference/with_temp_libpaths.html" class="external-link">withr::with_temp_libpaths</a></code> is recommended to isolate the download process.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># restart of R session could be needed</span>
<span class="fu">withr</span><span class="fu">::</span><span class="fu"><a href="https://withr.r-lib.org/reference/with_temp_libpaths.html" class="external-link">with_temp_libpaths</a></span><span class="op">(</span><span class="op">{</span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/pac_true_size.html">pac_true_size</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span> <span class="op">/</span> <span class="fl">10</span><span class="op">**</span><span class="fl">6</span>, <span class="st">"MB"</span>, <span class="st">"\n"</span><span class="op">)</span><span class="op">}</span><span class="op">)</span></code></pre></div>
<p>Installation in your main library.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># if not have</span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"shiny"</span><span class="op">)</span></code></pre></div>
<p>Size of the <code>devtools</code> package:</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/pac_size.html">pac_size</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span> <span class="op">/</span> <span class="fl">10</span><span class="op">**</span><span class="fl">6</span>, <span class="st">"MB"</span>, <span class="st">"\n"</span><span class="op">)</span></code></pre></div>
<p>True size of the package as taking into account its dependencies. At the time of writing it, it is <code>113MB</code> for <code>devtools</code> without base packages (<code>Mac OS arm64</code>).</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/pac_true_size.html">pac_true_size</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span> <span class="op">/</span> <span class="fl">10</span><span class="op">**</span><span class="fl">6</span>, <span class="st">"MB"</span>, <span class="st">"\n"</span><span class="op">)</span></code></pre></div>
<p>A reasonable assumption might be to count only dependencies which are not used by any other package. Then we could use <code>exclude_joint</code> argument to limit them. However hard to assume if your local installation is a reasonable proxy for an average user.</p>
<pre><code><span class="co"># exclude packages if at least one other package use it too</span>
<span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/pac_true_size.html">pac_true_size</a></span><span class="op">(</span><span class="st">"devtools"</span>, exclude_joint <span class="op">=</span> <span class="fl">1L</span><span class="op">)</span> <span class="op">/</span> <span class="fl">10</span><span class="op">**</span><span class="fl">6</span>, <span class="st">"MB"</span>, <span class="st">"\n"</span><span class="op">)</span></code></pre>
<p>Might be useful to check the number of dependencies too:</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/pac_deps.html">pac_deps</a></span><span class="op">(</span><span class="st">"devtools"</span>, local <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">$</span><span class="va">Package</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="the-shiny-app-utils">The shiny app utils<a class="anchor" aria-label="anchor" href="#the-shiny-app-utils"></a>
</h2>
<p>The shiny app dependencies packages are checked. By default the <code>c("Depends", "Imports", "LinkingTo")</code> DESCRIPTION files fields are check recursively for each package recognized with the <code><a href="https://rstudio.github.io/renv/reference/dependencies.html" class="external-link">renv::dependencies</a></code> function. The required dependencies have to be installed in the local repository.</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/app_deps.html">app_deps</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"examples/04_mpg"</span>, package <span class="op">=</span> <span class="st">"shiny"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>When we want to check only direct dependencies, <code>recursive</code> argument has to be set to <code>FALSE</code>. Then you could use the <code><a href="https://rstudio.github.io/renv/reference/dependencies.html" class="external-link">renv::dependencies</a></code> function directly.</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/app_deps.html">app_deps</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"examples/04_mpg"</span>, package <span class="op">=</span> <span class="st">"shiny"</span><span class="op">)</span>, recursive <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<p>The size of shiny app is a sum of dependencies and the app directory. The app dependencies (packages) are checked recursively.</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/app_size.html">app_size</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"examples/04_mpg"</span>, package <span class="op">=</span> <span class="st">"shiny"</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="fl">10</span><span class="op">**</span><span class="fl">6</span>, <span class="st">"MB"</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="base-packages">Base packages<a class="anchor" aria-label="anchor" href="#base-packages"></a>
</h2>
<p>Useful functions to get a list of base packages. You might want to exclude them from final results.</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/pacs_base.html">pacs_base</a></span><span class="op">(</span><span class="op">)</span>
<span class="co"># start up loaded, base packages</span>
<span class="fu">pacs</span><span class="fu">::</span><span class="fu"><a href="../reference/pacs_base.html">pacs_base</a></span><span class="op">(</span>startup <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Maciej Nasinski.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.9000.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
